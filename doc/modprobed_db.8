.\" Text automatically generated by txt2man
.TH modprobed_db 8 "13 April 2013" "" ""
.SH NAME
\fBModprobed_db \fP- Store and recall every module probed on the system at will.
\fB
.SH SYNOPSIS
.nf
.fam C
\fBmodprobed_db\fP [\fIoptions\fP]

.fam T
.fi
.fam T
.fi
.SH DESCRIPTION
Modprobed_db is a useful utility for users wishing to build a minimal kernel via a "make localmodconfig" (written by Steven Rostedt). In a nutshell, Rostedt's localmodconfig takes every module currently loaded and adjusts the kernel's .config file to enable the corresponding selections for each one thus hardcoding them into the target kernel. This results in a system-specific, smaller kernel package and footprint as well as reduced compilation times.
.PP
Modprobed_db simply logs every module ever probed on the target system to a text-based database and can recall them, that is modprobes them all, to provide substrate for the "make localmodconfig" described above.
.SH OPTIONS
.TP
.B
list
Display to stdout the contents of the database defined in /etc/modprobed_db.conf.  Output is in alphabetical order.
.TP
.B
store
Take a snapshot of currently loaded modules and log them to the database file.  Note that this operation collects a cumulative list of all modules probed and only logs ones that \fBmodprobed_db\fP has not seen before.
.TP
.B
recall
Call modprobe for every module contained in the datebase file.
.SH QUICK SETUP

.IP 1. 4
Optionally edit /etc/modprobed_db.conf to define the path to the database (default is /var/log).
.IP 2. 4
Edit /etc/modprobed_db.conf to define modules to ignore in the IGNORE array. For example, modules that are not a provided by the Linux kernel package and are provided by an external package. The examples provided are a few suggestions specific to Arch Linux.
.IP 3. 4
Add an entry to the root crontab to have the script run at some regular interval via crontab \fB-e\fP as the root user.
.PP
.nf
.fam C
        For example, once every 5 min:
        */5 * * * *     /usr/bin/modprobed_db store &> /dev/null

        For example, once every hour:
        0 */1 * * *     /usr/bin/modprobed_db store &> /dev/null

.fam T
.fi
For more, see: https://wiki.archlinux.org/index.php/Modprobed_db
.SH OPTIONAL
Modprobed_db can run as a regular user provided that the two log files it maintains is owned by said user. Once the initial databases have been created, simply chown them to the target user and his/her group. Now \fBmodprobed_db\fP will happily run as that user. By default, the two database files in question are:
.IP \(bu 3
/var/log/modprobed.db
.IP \(bu 3
/var/log/modprobed.long
.SH SEE ALSO
\fBmodprobe\fP(8)
.SH BUGS
No known bugs.
.SH AUTHOR
graysky (graysky AT archlinux DOT us)
